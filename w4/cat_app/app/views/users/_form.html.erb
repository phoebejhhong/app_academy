<% request_method = user.persisted? ? 'patch' : 'post' %>
<% submit_value = user.persisted? ? 'Update!' : 'Sign Up!' %>

<form action="/user" method="POST">
  <input type="hidden"
  name="authenticity_token"
  value="<%= form_authenticity_token %>">

  <input type="hidden" name="_method" value="<%= request_method %>">
  <label for="user_username">Username</label>
  <input id="user_username" type="text" name="user[username]" value="<%= @user.username %>">
  <label for="user_password">Password</label>
  <input id="user_password" type="password" name="user[password]">
  <input type="submit" value="<%= submit_value %>">
</form>
